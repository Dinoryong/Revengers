# Delegate Pattern

iOS개발에서 가장 중요한 패턴이다.
어찌 보면 쉬운 패턴인데, 처음 할때는 한번에 이해하기가 어렵다.
여러번 보면.. 그래도 할만 하니까 해보자.

Delegate Pattern에서 객체는 다른 객체를 자신의 대리자로 지정한다.
자신의 제공하는 기능중 일부를 대리자가 수행하도록 위임함.

대표적으로 Delegate pattern을 사용하는 것은 TableView이다.
테이블 뷰는 사용자가 항목을 선택했을때, 사용자가 어떤 작업을 실행해야 할지 알지 못한다.
모든 작업을 모은 다음에, 공통적인 부분만 뽑아내서 일반화 시키는 것도 불가능하다.
그래서 이러한 부분을 대리자에게 위임을 하는 것이다.

Delegate pattern 에서는 두개의 객체가 존재한다.
기능을 위임하는 Table View와 Table View의 일부 기능을 수행하는 Delegate 객체를 말할수 있겠다.

다른 객체에 기능을 위임할수 있는 객체를 보면 delegate, dataSource 같은 접미어를 가진 데이터 소스가 존재한다.
이 속성에 위임할 객체를 저장하는 방식으로 Delegate를 저장한다.
사용자가 Table을 선택 했을 때, Delegate 로 지정된 객체에게 처리를 요청하게 된다.

사람처럼 말로 요청할순 없고, 메소드를 호출하는 방식으로 호출하게 된다.
다시 바꿔 말하면, Delegate객체는 Table View가 호출하는 메소드를 구현해야 한다는 것이다.
보통 메소드는 Protocol로 선언이 되어있고, Delegate는 이러한 Protocol을 통해 구현해야한다.

객체에서 이벤트가 발생하면, 이 객체는 자신의 Delegate로 지정된 객체에서 이벤트를 처리하는 메소드가 구현되어있는지 확인한다.
만약 메소드가 구현되어있다면 해당 메소드를 호출하게 된다.
만약 구현되어있지 않다면, 이벤트를 무시하거나 크래시가 발생하게 된다.

실제로 Delegate Pattern을 구현하는 것은 상대적으로 단순하다.

먼저 개발자 문서를 통해 Delegate Pattern이 필요한지 확인하고, 구현해야되는 메소드가 있는 프로토콜을 확인한다.
그런다음 인터페이스 빌더에서 두 객체를 연결하거나, 코드를 통하여 연결하게 된다.

테이블 뷰처럼 화면에 표시되는 컨트롤들은 보통 자신이 포함되어있는 View Controller를 Delegate로 지정한다.

마지막으로 Delegate로 지정된 객체에서 프로토콜을 구현하게 된다.

# Delegate Pattern이 왜 필요한가?

예를들어 Table View는 화면에 표시할 Cell을 직접 만들지 않고 프로토콜에 선언되어있는 메소드를 통해 Delegate에 요청한다.

메신저들을 보면 친구 목록과 채팅방을 테이블 뷰로 표시하고있지만, 쓸 정보들과 표시된 정보들은 차이가 있다.
이러한 디자인들을 클래스 하나하나에 미리 구현해 두는것은 불가능하다.

만약 Delegate Pattern을 사용하면, Table View는 Cell Design을 신경쓸 필요가 없어지게 된다.
TableView는 단순히 return된 cell을 받아서 그대로 화면에 출력하면 되기 때문이다.



